@{
    ViewData["Title"] = "información general - " + ViewData["CardCode"];
}
<div id="app_dashboard360">
    <div class="row">
        @*{{ BussinesPartner.information }}*@
    </div>
    <div v-if="BussinesPartner.information != null" class="row">
        <div class="col-lg-2 mg-t-30 mg-lg-t-0">
            <div class="card pd-20 pd-xs-30 shadow-base bd-0">
                <h6 class="tx-gray-800 tx-uppercase tx-semibold tx-13 mg-b-25">Información de contacto</h6>
                <label class="tx-10 tx-uppercase tx-mont tx-medium tx-spacing-1 mg-b-2">Cliente</label>
                <p class="tx-info mg-b-15">{{ BussinesPartner.information.objeto.cardName }}</p>

                <label class="tx-10 tx-uppercase tx-mont tx-medium tx-spacing-1 mg-b-2">Correo de contacto</label>
                <p class="tx-info mg-b-15">{{ BussinesPartner.information.objeto.e_Mail }}</p>

                <label class="tx-10 tx-uppercase tx-mont tx-medium tx-spacing-1 mg-b-2">Correo de facturación</label>
                <p class="tx-info mg-b-15">{{ BussinesPartner.information.objeto.e_MailL_invoice }}</p>

                <label class="tx-10 tx-uppercase tx-mont tx-medium tx-spacing-1 mg-b-2">Correo de estados de cuenta</label>
                <p class="tx-info mg-b-15">{{ BussinesPartner.information.objeto.e_MailL_account }}</p>

                <label class="tx-10 tx-uppercase tx-mont tx-medium tx-spacing-1 mg-b-2">Telefono(s)</label>
                <p class="tx-info mg-b-15">{{ BussinesPartner.information.objeto.phone2 }}</p>

                <h6 class="tx-gray-800 tx-uppercase tx-semibold tx-13 mg-b-25">Facturación</h6>

                <label class="tx-10 tx-uppercase tx-mont tx-medium tx-spacing-1 mg-b-2">Método de pago</label>
                <p class="tx-info mg-b-15">{{ BussinesPartner.information.objeto.descriptPayment }}</p>

                <label class="tx-10 tx-uppercase tx-mont tx-medium tx-spacing-1 mg-b-2">Moneda</label>
                <p class="tx-info mg-b-15">{{ BussinesPartner.information.objeto.currency }}</p>

                <label class="tx-10 tx-uppercase tx-mont tx-medium tx-spacing-1 mg-b-2">Monex USD</label>
                <p class="tx-info mg-b-15">{{ BussinesPartner.information.objeto.monexUSD }}</p>

                <label class="tx-10 tx-uppercase tx-mont tx-medium tx-spacing-1 mg-b-2">Monex MXP</label>
                <p class="tx-info mg-b-15">{{ BussinesPartner.information.objeto.monexMXP }}</p>

                <h6 class="tx-gray-800 tx-uppercase tx-semibold tx-13 mg-b-25">Grupo Splittel</h6>

                <label class="tx-10 tx-uppercase tx-mont tx-medium tx-spacing-1 mg-b-2">Ejecutivo de ventas</label>
                <p class="tx-info mg-b-15">{{ BussinesPartner.information.objeto.slpName }}</p>

                <label class="tx-10 tx-uppercase tx-mont tx-medium tx-spacing-1 mg-b-2">Correo del ejecutivo</label>
                <p class="tx-info mg-b-15">{{ BussinesPartner.information.objeto.email_employeSales }}</p>

            </div><!-- card -->
        </div>
        <div class="col-lg-10 mg-t-30 mg-lg-t-0">
            <div class="row no-gutters widget-1 shadow-base">
                <div class="col-sm-6 col-lg-3">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="card-title">Linea de crédito</h6>
                        </div><!-- card-header -->
                        <div class="card-body">
                            <span id="spark1"><img src="https://img.icons8.com/ultraviolet/40/000000/bank-card-back-side.png"></span>
                            <span>${{ BussinesPartner.information.objeto.creditLine | formatPrice }} {{ BussinesPartner.information.objeto.currency }}</span>
                        </div><!-- card-body -->
                    </div><!-- card -->
                </div>
                <div class="col-sm-6 col-lg-3">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="card-title">Saldo a favor</h6>
                        </div><!-- card-header -->
                        <div class="card-body">
                            <span id="spark1"><img src="https://img.icons8.com/ultraviolet/40/000000/bank-card-back-side.png"></span>
                            <span>${{ BussinesPartner.information.objeto.balance | formatPrice }} {{ BussinesPartner.information.objeto.currency }}</span>
                        </div><!-- card-body -->
                    </div><!-- card -->
                </div>
                <div class="col-sm-6 col-lg-3">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="card-title">Dias extras</h6>
                        </div><!-- card-header -->
                        <div class="card-body">
                            <span id="spark1"><img src="https://img.icons8.com/ultraviolet/40/000000/bank-card-back-side.png"></span>
                            <span>{{ BussinesPartner.information.objeto.extraDays }}</span>
                        </div><!-- card-body -->
                    </div><!-- card -->
                </div>
                <div class="col-sm-6 col-lg-3">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="card-title">Sección</h6>
                        </div><!-- card-header -->
                        <div class="card-body">
                            <span id="spark1"><img src="https://img.icons8.com/ultraviolet/40/000000/low-price.png"></span>
                            <span>{{ BussinesPartner.information.objeto.section }} </span>
                        </div><!-- card-body -->
                    </div><!-- card -->
                </div>
            </div>
            <div class="row  widget-1  mt-2">
                <div class="col-xl-12 ">
                    <div class="card bd">
                        <div class="card-header bd-b">
                            <ul class="nav nav-outline active-info flex-column flex-md-row">
                                <li class="nav-item">
                                    <a class="nav-link active" id="home-tab" data-toggle="tab" href="#tab_dashboard" role="tab" aria-controls="home" aria-selected="true">Dashboard</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="home-tab" data-toggle="tab" href="#tab_cotizaciones" role="tab" aria-controls="home" aria-selected="true">Cotizaciones</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#tab_pendientes_autorizacion" role="tab" aria-controls="profile" aria-selected="false">Pendientes de autorización</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#tab_pedidos_proceso" role="tab" aria-controls="contact" aria-selected="false">Pedidos en proceso</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#tab_historico" role="tab" aria-controls="contact" aria-selected="false">Historico de pedidos</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#tab_rechazados" role="tab" aria-controls="contact" aria-selected="false">Rechazados</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#tab_datos_envio" role="tab" aria-controls="contact" aria-selected="false">Datos de envío</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#tab_datos_facturacion" role="tab" aria-controls="contact" aria-selected="false">Datos de Facturación</a>
                                </li>
                            </ul>
                        </div><!-- card-header -->
                        <div class="card-body color-gray-lighter">
                            <div class="tab-content col-xl-12" id="myTabContent">
                                <div class="tab-pane fade show active col-xl-12" id="tab_dashboard" role="tabpanel" aria-labelledby="home-tab">
                                    <div class="row">
                                        <div class="col-xl-6 ">
                                            <div class="bd pd-20 card border">
                                                <h6 class="tx-gray-800 tx-uppercase tx-bold tx-14 mg-b-10">Top 5 de productos por precio</h6>
                                                <div v-if="ArtculosTopPrice.isGettingInformation == false" id="articulos_top_price" class="ht-200 ht-sm-300"></div>
                                                <div v-else>Obteniendo articulos</div>
                                            </div>
                                        </div><!-- col-6 -->
                                        <div class="col-xl-6 ">
                                            <div class="bd pd-20 card border">
                                                <h6 class="tx-gray-800 tx-uppercase tx-bold tx-14 mg-b-10">Top 5 de productos por cantidad</h6>
                                                <div v-if="ArtculosTopQuantity.isGettingInformation == false" id="articulos_top_quantity" class="ht-200 ht-sm-300"></div>
                                                <div v-else>Obteniendo articulos</div>
                                            </div>
                                        </div><!-- col-6 -->
                                    </div><!-- row -->
                                </div>
                                <div class="tab-pane fade show " id="tab_cotizaciones" role="tabpanel" aria-labelledby="home-tab">
                                    <div class="col-xl-12">
                                        <table v-if="cotizaciones.isGetting == false" class="table display responsive nowrap " id="DocumentosCotizaciones" style="width:100% !important;">
                                            <thead>
                                                <tr>
                                                    <th>No.Ecom</th>
                                                    <th>Cliente</th>
                                                    <th>Nombre</th>
                                                    <th>Fecha</th>
                                                    <th>Total</th>
                                                    <th>Moneda</th>
                                                    <th>Tipo de cambio</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="item in cotizaciones.data.records">

                                                    <td><a href="#" v-on:click="" title="Ver articulos" class="">{{ item.docNumEcommerce }}</a></td>
                                                    <td>{{ item.cardCode }}</td>
                                                    <td>{{ item.cardname }}</td>
                                                    <td>{{ item.docDate | moment }}</td>
                                                    <td>${{ item.docTotal | formatPrice }}</td>
                                                    <td>{{ item.docCur }}</td>
                                                    <td>${{ item.docRate | formatPrice }}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <span v-else>Obteniendo información</span>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="tab_pendientes_autorizacion" role="tabpanel" aria-labelledby="profile-tab">
                                    <div class="col-xl-12">
                                        <table v-if="pendientesAut.isGetting == false" class="table display responsive nowrap " id="DocumentosPendientesAut" style="width:100% !important;">
                                            <thead>
                                                <tr>
                                                    <th>No.Ecom</th>
                                                    <th>Cliente</th>
                                                    <th>Nombre</th>
                                                    <th>Fecha</th>
                                                    <th>Total</th>
                                                    <th>Moneda</th>
                                                    <th>Tipo de cambio</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="item in pendientesAut.data.records">

                                                    <td><a href="#" v-on:click="" title="Ver articulos" class="">{{ item.docNumEcommerce }}</a></td>
                                                    <td>{{ item.cardCode }}</td>
                                                    <td>{{ item.cardname }}</td>
                                                    <td>{{ item.docDate | moment }}</td>
                                                    <td>${{ item.docTotal | formatPrice }}</td>
                                                    <td>{{ item.docCur }}</td>
                                                    <td>${{ item.docRate | formatPrice }}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <span v-else>Obteniendo información</span>
                                        tab_pendientes_autorizacion
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="tab_pedidos_proceso" role="tabpanel" aria-labelledby="contact-tab">
                                    <table v-if="enProceso.isGetting == false" class="table display responsive nowrap " id="DocumentosProceso" style="width:100% !important;">
                                        <thead>
                                            <tr>
                                                <th>No.Ecom</th>
                                                <th>Cliente</th>
                                                <th>Nombre</th>
                                                <th>Fecha</th>
                                                <th>Total</th>
                                                <th>Moneda</th>
                                                <th>Tipo de cambio</th>
                                                <th>Estatus</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="item in enProceso.data.records">

                                                <td><a href="#" v-on:click="" title="Ver articulos" class="">{{ item.docNumEcommerce }}</a></td>
                                                <td>{{ item.cardCode }}</td>
                                                <td>{{ item.cardname }}</td>
                                                <td>{{ item.docDate | moment }}</td>
                                                <td>${{ item.docTotal | formatPrice }}</td>
                                                <td>{{ item.docCur }}</td>
                                                <td>${{ item.docRate | formatPrice }}</td>
                                                <td>{{ item.status | status }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <span v-else>Obteniendo información</span>
                                </div>
                                <div class="tab-pane fade" id="tab_historico" role="tabpanel" aria-labelledby="contact-tab">
                                    <table v-if="historicoPedidos.isGetting == false" class="table display responsive nowrap " id="DocumentoshistoricoPedidos" style="width:100% !important;">
                                        <thead>
                                            <tr>
                                                <th>No.Ecom</th>
                                                <th>Cliente</th>
                                                <th>Nombre</th>
                                                <th>Fecha</th>
                                                <th>Total</th>
                                                <th>Moneda</th>
                                                <th>Tipo de cambio</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="item in historicoPedidos.data.records">

                                                <td><a href="#" v-on:click="" title="Ver articulos" class="">{{ item.docNumEcommerce }}</a></td>
                                                <td>{{ item.cardCode }}</td>
                                                <td>{{ item.cardname }}</td>
                                                <td>{{ item.docDate | moment }}</td>
                                                <td>${{ item.docTotal | formatPrice }}</td>
                                                <td>{{ item.docCur }}</td>
                                                <td>${{ item.docRate | formatPrice }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <span v-else>Obteniendo información</span>
                                </div>
                                <div class="tab-pane fade" id="tab_rechazados" role="tabpanel" aria-labelledby="contact-tab">
                                    <table v-if="rechazados.isGetting == false" class="table display responsive nowrap" id="table_documentsRejected" style="width:100% !important;">
                                        <thead>
                                            <tr>
                                                <th>Documento</th>
                                                <th>Cliente</th>
                                                <th>Nombre</th>
                                                <th>Fecha</th>
                                                <th>status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="item in rechazados.data.records">
                                                <td><a href="#" v-on:click="" title="Ver articulos" class="">{{ item.docNum }}</a></td>
                                                <td>{{ item.cardCode }}</td>
                                                <td>{{ item.cardname }}</td>
                                                <td>{{ item.docDate }}</td>
                                                <td>{{ item.status }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <span v-else>Obteniendo información</span>
                                </div>
                                <div class="tab-pane fade" id="tab_datos_envio" role="tabpanel" aria-labelledby="contact-tab">
                                    <table v-if="direccionesEnvio.isGetting == false" class="table display responsive nowrap" id="table_direccionesEnvio" style="width:100% !important;">
                                        <thead>
                                            <tr>
                                                <th>Dirección</th>
                                                <th>CP</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="item in direccionesEnvio.data.records">
                                                <td>
                                                    {{ item.city }} <br />
                                                    {{ item.street }} No.Ext: {{ item.streetNo }} Col: {{ item.block }}
                                                </td>
                                                <td>{{ item.zipCode }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <span v-else>Obteniendo información</span>
                                </div>
                                <div class="tab-pane fade" id="tab_datos_facturacion" role="tabpanel" aria-labelledby="contact-tab">
                                    <table v-if="direccionesFacturacion.isGetting == false" class="table display responsive nowrap" id="table_direccionesFacturacion" style="width:100% !important;">
                                        <thead>
                                            <tr>
                                                <th>Dirección</th>
                                                <th>CP</th>
                                                <th>RFC</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="item in direccionesFacturacion.data.records">
                                                <td>
                                                    {{ item.city }} <br />
                                                    {{ item.street }} No.Ext: {{ item.streetNo }} Col: {{ item.block }}
                                                </td>
                                                <td>{{ item.zipCode }}</td>
                                                <td>{{ item.federalTaxID }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <span v-else>Obteniendo información</span>
                                </div>
                            </div>
                        </div><!-- card-body -->
                    </div>
                </div>
            </div><!-- row --> 
            
        </div>
    </div>
    <div v-else>
        <div class="alert alert-danger alert-bordered pd-y-20" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="d-flex align-items-center justify-content-start">
                <i class="icon ion-ios-close alert-icon tx-52 tx-danger mg-r-20"></i>
                <div>
                    <h5 class="mg-b-2 tx-danger">Cliente [@ViewData["CardCode"]] no encotrado.</h5>
                    <p class="mg-b-0 tx-gray">por favor selecciona un codigo de cliente valido...</p>
                </div>
            </div><!-- d-flex -->
        </div><!-- alert -->
    </div>
</div>

@section Scripts {
    <script>
        var App_dashboard360 = new Vue({
            el: "#app_dashboard360",
            data:
            {
                serverToken: {
                    'RequestVerificationToken': document.querySelector("input[name=__RequestVerificationToken]").value
                },
                BussinesPartner:
                {
                    cardCode: "@ViewData["CardCode"]",
                    information: null,
                    isGettingInformation: true
                },
                ArtculosTopPrice: {
                    informacion: null,
                    isGettingInformation: true,
                },
                ArtculosTopQuantity: {
                    informacion: null,
                    isGettingInformation: true,
                },
                cotizaciones: {
                    data: null,
                    isGetting: true
                },
                enProceso: {
                    data: null,
                    isGetting: true
                },
                rechazados: {
                    data: null,
                    isGetting: true
                },
                direccionesEnvio: {
                    data: null,
                    isGetting: true
                },
                direccionesFacturacion: {
                    data: null,
                    isGetting: true
                },
                historicoPedidos: {
                    data: null,
                    isGetting: true
                },
                pendientesAut: {
                    data: null,
                    isGetting: true
                }
            },
            async mounted()
            {
                await this.GetBussinesPartner(this.BussinesPartner.cardCode);
                await this.GetarticulosTopPrice();
                await this.GetarticulosTopQuantity();
                setTimeout(this.ShowTopPrice(), 3000);
                setTimeout(this.ShowTopQuantity(), 3000);
                await this.GetCotizaciones();
                await this.GetOrderspending();
                await this.GetEnProceso();
                await this.GetOrderHistoryByCustomer();
                await this.GetRechazados();
                await this.GetDireccionesEnvio();
                await this.GetDireccionesFacturacion();
            },
            async updated()
            {

            },
            methods:
            {
                GetOrderspending: async function () {
                    var params = new URLSearchParams();
                        params.append('CardCode', '' + this.BussinesPartner.cardCode);
                    await axios.post('@Url.Action("DataGetOrdersInPendingByBP","Cotizaciones")', params, {headers: this.serverToken}).then(response => {
                        this.pendientesAut.data =response.data
                    }).catch(error => {
                        alert(error.response.data);
                    }).finally(() => this.pendientesAut.isGetting = false);
                    $('#DocumentosPendientesAut').DataTable();
                },
                GetOrderHistoryByCustomer: async function () {
                    var params = new URLSearchParams();
                        params.append('CardCode', '' + this.BussinesPartner.cardCode);
                    await axios.post('@Url.Action("DataGetOrderHistoryByCustomer","Document")', params, {headers: this.serverToken}).then(response => {
                        this.historicoPedidos.data =response.data
                    }).catch(error => {
                        alert(error.response.data);
                    }).finally(() => this.historicoPedidos.isGetting = false);
                    $('#DocumentoshistoricoPedidos').DataTable();
                },
                GetDireccionesFacturacion: async function () {
                    var params = new URLSearchParams();
                        params.append('CardCode', '' + this.BussinesPartner.cardCode);
                    await axios.post('@Url.Action("DataGetAddressesBillToByBP","BussinesPartner")', params, {headers: this.serverToken}).then(response => {
                        this.direccionesFacturacion.data =response.data
                    }).catch(error => {
                        alert(error.response.data);
                    }).finally(() => this.direccionesFacturacion.isGetting = false);
                    $('#table_direccionesFacturacion').DataTable();
                },
                GetDireccionesEnvio: async function () {
                    var params = new URLSearchParams();
                        params.append('CardCode', '' + this.BussinesPartner.cardCode);
                    await axios.post('@Url.Action("DataGetAddressesShipToByBP","BussinesPartner")', params, {headers: this.serverToken}).then(response => {
                        this.direccionesEnvio.data =response.data
                    }).catch(error => {
                        alert(error.response.data);
                    }).finally(() => this.direccionesEnvio.isGetting = false);
                    $('#table_direccionesEnvio').DataTable();
                },
                GetRechazados: async function () {
                    var params = new URLSearchParams();
                        params.append('CardCode', '' + this.BussinesPartner.cardCode);
                    await axios.post('@Url.Action("DataGetOrderRejectedByCustomer","Document")', params, {headers: this.serverToken}).then(response => {
                        this.rechazados.data =response.data
                    }).catch(error => {
                        alert(error.response.data);
                    }).finally(() => this.rechazados.isGetting = false);
                    $('#table_documentsRejected').DataTable();
                },
                GetEnProceso: async function () {
                    var params = new URLSearchParams();
                        params.append('CardCode', '' + this.BussinesPartner.cardCode);
                    await axios.post('@Url.Action("DataBussinessPartner","Document")', params, this.serverToken).then(response => {
                        this.enProceso.data =response.data
                    }).catch(error => {
                        alert(error.response.data);
                    }).finally(() => this.enProceso.isGetting = false);
                    $('#DocumentosProceso').DataTable();
                },
                GetCotizaciones: async function () {
                    var params = new URLSearchParams();
                        params.append('CardCode', '' + this.BussinesPartner.cardCode);
                    await axios.post('@Url.Action("DataBussinessPartner","Cotizaciones")', params, this.serverToken).then(response => {
                        this.cotizaciones.data =response.data
                    }).catch(error => {
                        alert(error.response.data);
                    }).finally(() => this.cotizaciones.isGetting = false);
                     $('#DocumentosCotizaciones').DataTable();
                },
                GetBussinesPartner: async function (CardCode)
                {
                    RequestVerificationToken = document.querySelector("input[name=__RequestVerificationToken]").value
                    const headers = {
                        'Content-Type': 'multipart/form-data',
                        'RequestVerificationToken': RequestVerificationToken
                    }
                    let params = new FormData();
                        params.append('CardCode', CardCode);
                    await axios.post('@Url.Action("DataGetBussinesPartner","BussinesPartner")',params,{headers: headers}).then(response => {
                        this.BussinesPartner.information = response.data;
                    }).catch(error => {
                        alert(error.response.data);
                    }).finally(() => this.BussinesPartner.isGettingInformation = false);
                },
                GetarticulosTopPrice: async function () {
                    RequestVerificationToken = document.querySelector("input[name=__RequestVerificationToken]").value
                    const headers = {
                        'Content-Type': 'multipart/form-data',
                        'RequestVerificationToken': RequestVerificationToken
                    }
                    let params = new FormData();
                        params.append('CardCode', this.BussinesPartner.cardCode);
                    await axios.post('@Url.Action("DataGetArticulosTopByPrice","BussinesPartner")',params,{headers: headers}).then(response => {
                        this.ArtculosTopPrice.information = response.data;
                    }).catch(error => {
                        alert(error.response.data);
                    }).finally(() => this.ArtculosTopPrice.isGettingInformation = false);
                },
                GetarticulosTopQuantity: async function () {
                    RequestVerificationToken = document.querySelector("input[name=__RequestVerificationToken]").value
                    const headers = {
                        'Content-Type': 'multipart/form-data',
                        'RequestVerificationToken': RequestVerificationToken
                    }
                    let params = new FormData();
                        params.append('CardCode', this.BussinesPartner.cardCode);
                    await axios.post('@Url.Action("DataGetArticulosTopByQuantity","BussinesPartner")',params,{headers: headers}).then(response => {
                        this.ArtculosTopQuantity.information = response.data;
                    }).catch(error => {
                        alert(error.response.data);
                    }).finally(() => this.ArtculosTopQuantity.isGettingInformation = false);
                },
                ShowTopPrice: function () {
                    if (this.ArtculosTopPrice.information != null || this.ArtculosTopPrice.information.records != undefined) {
                        console.log("generando chart");
                        let colors = ['#9A3267', '#ED4151', '#F89D44', '#85C441', '#36B3E3'];
                        let piedata = [];
                        this.ArtculosTopPrice.information.records.forEach((data, index) => {
                            piedata.push({ label: data.description, data: [[1,data.unitPrice]], color: colors[index]});
                        });
                        this.PieChart(piedata, "#articulos_top_price");
                    }

                },
                ShowTopQuantity: function () {
                    if (this.ArtculosTopQuantity.information != null || this.ArtculosTopQuantity.information.records != undefined) {
                        console.log("generando chart");
                        let colors = ['#9A3267', '#ED4151', '#F89D44', '#85C441', '#36B3E3'];

                        let piedata = [];
                        this.ArtculosTopQuantity.information.records.forEach((data, index) => {
                            piedata.push({ label: data.description, data: [[1,data.quantity]], color: colors[index]});
                        });
                        this.PieChart(piedata, "#articulos_top_quantity");
                    }

                },
                PieChart: function (piedata, id) {
                    $.plot(id, piedata, {
                      series: {
                        pie: {
                          show: true,
                          radius: 1,
                          label: {
                            show: true,
                            radius: 2/3,
                            formatter: this.labelFormatter,
                            threshold: 0.1
                          }
                        }
                      },
                      grid: {
                        hoverable: true,
                        clickable: true
                      }
                    });
                },
                labelFormatter: function labelFormatter(label, series) {
		            return "<div style='font-size:8pt; text-align:center; padding:2px; color:white;'>" + Math.round(series.percent) + "%</div>";
	            }
            },
            filters: {
                formatPrice: function (value) {
                    let val = (value / 1).toFixed(2).replace('.', ',')
                    return val.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".")
                },
                momentFull: function (date) {
                    return moment(date).format('MMMM Do YYYY, h:mm:ss a');
                },
                moment: function (date) {
                    return moment(date).locale('es').format('MMMM Do YYYY');
                },
               status: function (stats) {
                    if (stats == 1) {
                        return "En proceso";
                    }
                     if (stats == 2) {
                        return "Surtiendo";
                    }
                     if (stats == 3) {
                       return "Embarcando";
                    }
                     if (stats == 4) {
                        return "Enviando";
                    }
                     if (stats == 5) {
                        return "Entregando";
                    }
                }
            }
        });
    </script>
}